machine:
  environment:
    XCODE_SCHEME: 'scheme'
    XCODE_WORKSPACE: 'workspace'

general:
  artifacts:
    - pages/_site

dependencies:
  pre:
    - sudo pip install jsonschema
test:
  override:
    - ./software_versions.rb > $CIRCLE_ARTIFACTS/software_versions.json
    - bundle exec rspec:
        environment:
          SOFTWARE: $CIRCLE_ARTIFACTS/software_versions.json
    - jsonschema -i $CIRCLE_ARTIFACTS/software_versions.json software_versions.schema.json
    - bundle exec jekyll build:
        pwd: pages
